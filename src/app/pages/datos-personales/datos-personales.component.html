<form id="datosPersonalesForm" #datosPersonalesForm="ngForm"
    (ngSubmit)="appComponent.markAsTouched(datosPersonalesForm) && datosPersonalesForm.form.valid && guardarDatos(datosPersonalesForm)"
    ngNativeValidate>
    <div class="row p-4">
        <!-- DNI -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="text" [(ngModel)]="usuario.DNI" #DNI="ngModel" name="DNI" class="form-control"
                            required placeholder="DNI" minlength="7" pattern="\d*" maxlength="8"
                            [ngClass]="{'is-valid': DNI.valid && DNI.touched, 'is-invalid': DNI.invalid && DNI.touched}">
                    </div>
                </div>
                <div *ngIf="DNI.errors && DNI.dirty && DNI.touched" class="with-errors errors">
                    <div [hidden]="!DNI.errors.required">
                        Número no puede estar vacío.
                    </div>
                    <div [hidden]="!DNI.errors.minlength">
                        Número debe ser un número entero y contener al menos 7 dígitos.
                    </div>
                    <div [hidden]="!DNI.errors.maxlength">
                        Número debe ser un número entero y contener 8 dígitos como máximo.
                    </div>
                </div>
            </div>
        </div>
        <!-- NOMBRE -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="text" [(ngModel)]="usuario.Nombre" #Nombre="ngModel" name="Nombre"
                            class="form-control" required placeholder="Nombre" pattern="[a-zA-Z]+" title="Sólo letras"
                            minlength="2" maxlength="15"
                            [ngClass]="{'is-valid': Nombre.valid && Nombre.touched, 'is-invalid': Nombre.invalid && Nombre.touched}">
                    </div>
                </div>
                <div *ngIf="Nombre.errors && (Nombre.dirty || Nombre.touched)" class="with-errors errors">
                    <div [hidden]="!Nombre.errors.required">
                        Nombre no puede estar vacío.
                    </div>
                    <div [hidden]="!Nombre.errors.minlength">
                        El nombre debe contener al menos 2 caracteres.
                    </div>
                    <div [hidden]="!Nombre.errors.maxlength">
                        El nombre debe contener 15 caracteres máximo.
                    </div>
                </div>
            </div>
        </div>
        <!-- APELLIDO -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="text" [(ngModel)]="usuario.Apellido" #Apellido="ngModel" name="Apellido"
                            class="form-control" required placeholder="Apellido" pattern="[a-zA-Z]+" title="Sólo letras"
                            minlength="2" maxlength="15"
                            [ngClass]="{'is-valid': Apellido.valid && Apellido.touched, 'is-invalid': Apellido.invalid && Apellido.touched}">
                    </div>
                </div>
                <div *ngIf="Apellido.errors && (Apellido.dirty || Apellido.touched)" class="with-errors errors">
                    <div [hidden]="!Apellido.errors.required">
                        Apellido no puede estar vacío.
                    </div>
                    <div [hidden]="!Apellido.errors.minlength">
                        El apellido debe contener al menos 2 caracteres.
                    </div>
                    <div [hidden]="!Apellido.errors.maxlength">
                        El apellido debe contener 15 caracteres máximo.
                    </div>
                </div>
            </div>
        </div>
        <!-- </div>
                            <div class="row pt-4"> -->
        <!-- EMAIL -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="email" [(ngModel)]="usuario.Email" #Email="ngModel" name="Email"
                            class="form-control" required placeholder="Email"
                            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                            [ngClass]="{'is-valid': Email.valid && Email.touched, 'is-invalid': Email.invalid && Email.touched}">
                    </div>
                </div>
                <div *ngIf="Email.errors && (Email.dirty || Email.touched)" class="with-errors errors">
                    <div [hidden]="!Email.errors.required">
                        Email no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
        <!-- CELULAR -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="tel" [(ngModel)]="usuario.Celular" #Celular="ngModel" name="Celular"
                            class="form-control" required placeholder="Celular" pattern="\d*"
                            [ngClass]="{'is-valid': Celular.valid && Celular.touched, 'is-invalid': Celular.invalid && Celular.touched}">
                    </div>
                </div>
                <div *ngIf="Celular.errors && (Celular.dirty || Celular.touched)" class="with-errors errors">
                    <div [hidden]="!Celular.errors.required">
                        Celular no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
        <!-- TELEFONO -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="tel" [(ngModel)]="usuario.Telefono" #Telefono="ngModel" name="Telefono"
                            class="form-control" required placeholder="Telefono" pattern="\d*"
                            [ngClass]="{'is-valid': Telefono.valid && Telefono.touched, 'is-invalid': Telefono.invalid && Telefono.touched}">
                    </div>
                </div>
                <div *ngIf="Telefono.errors && (Telefono.dirty || Telefono.touched)" class="with-errors errors">
                    <div [hidden]="!Telefono.errors.required">
                        Teléfono no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
        <!-- </div>
                            <div class="row pt-4"> -->
        <!-- PROVINCIA -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <select [(ngModel)]="usuario.ProvinciaId" #ProvinciaId="ngModel" class="form-control"
                            name="ProvinciaId" required (change)="cargarCiudades()"
                            [ngClass]="{'is-valid': ProvinciaId.valid && ProvinciaId.touched, 'is-invalid': ProvinciaId.invalid && ProvinciaId.touched}">
                            <option value="">Provincia
                            </option>
                            <option *ngFor="let i of provincias" [value]="i.id">
                                {{i.nombre}}
                            </option>
                        </select>
                    </div>
                </div>
                <div *ngIf="ProvinciaId.errors && (ProvinciaId.dirty || ProvinciaId.touched)"
                    class="with-errors errors">
                    <div [hidden]="!ProvinciaId.errors.required">
                        Provincia no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
        <!-- CIUDAD -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <select [(ngModel)]="usuario.CiudadId" #CiudadId="ngModel" class="form-control" name="CiudadId"
                            required (change)="guardarCiudad()"
                            [ngClass]="{'is-valid': CiudadId.valid && CiudadId.touched, 'is-invalid': CiudadId.invalid && CiudadId.touched}">
                            <option value="">Ciudad
                            </option>
                            <option *ngFor="let i of ciudades" [value]="i.id">
                                {{i.nombre}}
                            </option>
                        </select>
                    </div>
                </div>
                <div *ngIf="CiudadId.errors && (CiudadId.dirty || CiudadId.touched)" class="with-errors errors">
                    <div [hidden]="!CiudadId.errors.required">
                        Ciudad no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
        <!-- DOMICILIO -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="text" [(ngModel)]="usuario.Domicilio" #Domicilio="ngModel" name="Domicilio"
                            class="form-control" required placeholder="Domicilio"
                            [ngClass]="{'is-valid': Domicilio.valid && Domicilio.touched, 'is-invalid': Domicilio.invalid && Domicilio.touched}">
                    </div>
                </div>
                <div *ngIf="Domicilio.errors && (Domicilio.dirty || Domicilio.touched)" class="with-errors errors">
                    <div [hidden]="!Domicilio.errors.required">
                        Domicilio no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
        <!-- </div>
                            <div class="row pt-4"> -->
        <!-- FECHA DE NACIMIENTO -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="date" [(ngModel)]="usuario.FechaNacimiento" #FechaNacimiento="ngModel"
                            name="FechaNacimiento" min="1922-01-01" max="2003-01-01" class="form-control" required
                            placeholder="FechaNacimiento"
                            [ngClass]="{'is-valid': FechaNacimiento.valid && FechaNacimiento.touched, 'is-invalid': FechaNacimiento.invalid && FechaNacimiento.touched}">
                    </div>
                </div>
                <div *ngIf="FechaNacimiento.errors && (FechaNacimiento.dirty || FechaNacimiento.touched)"
                    class="with-errors errors">
                    <div [hidden]="!FechaNacimiento.errors.required">
                        FechaNacimiento no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
        <!-- USUARIO -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="text" [(ngModel)]="usuario.Usuario" #Usuario="ngModel" minlength="3" maxlength="30"
                            (focusout)="usuarioExist(datosPersonalesForm)" name="Usuario" class="form-control" required
                            placeholder="Usuario"
                            [ngClass]="{'is-valid': Usuario.valid && Usuario.touched, 'is-invalid': Usuario.invalid && Usuario.touched}">
                    </div>
                </div>
                <div *ngIf="Usuario.errors && (Usuario.dirty || Usuario.touched)" class="with-errors errors">
                    <div [hidden]="!Usuario.errors.required">
                        Usuario no puede estar vacío.
                    </div>
                    <div [hidden]="!Usuario.errors.minlength">
                        El usuario debe contener al menos 3 caracteres.
                    </div>
                    <div [hidden]="!Usuario.errors.maxlength">
                        El usuario debe contener 30 caracteres máximo.
                    </div>
                    <div [hidden]="!Usuario.errors.notUnique">
                        El usuario ya existe.
                    </div>
                </div>
            </div>
        </div>
        <!-- CONTRASEÑA -->
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="form-group">
                <div class="row">
                    <div class="col-10">
                        <input type="password" [(ngModel)]="usuario.Password" #Contrasenia="ngModel" name="Contrasenia"
                            class="form-control" required placeholder="Contrasenia"
                            [ngClass]="{'is-valid': Contrasenia.valid && Contrasenia.touched, 'is-invalid': Contrasenia.invalid && Contrasenia.touched}">
                    </div>
                </div>
                <div *ngIf="Contrasenia.errors && (Contrasenia.dirty || Contrasenia.touched)"
                    class="with-errors errors">
                    <div [hidden]="!Contrasenia.errors.required">
                        Contraseña no puede estar vacío.
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row pt-4">
        <div class="col">
            <button type="submit" class="btn btn-primary btn-block float-end bg-mercantil">
                SIGUIENTE</button>
        </div>
    </div>
</form>